@model BlankBase.Models.PaginationServerSideViewModel

@* Pagination Info *@
<div class="d-flex justify-content-between align-items-center mb-3">
    <div class="text-muted">
        Showing @((Model.PageNumber - 1) * Model.PageSize + 1) to
        @Math.Min(Model.PageNumber * Model.PageSize, Model.TotalCount)
        of @Model.TotalCount records
    </div>
    <div class="text-muted">
        Page @Model.PageNumber of @Model.TotalPages
    </div>
</div>

@* Pagination Controls *@
<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        @* Previous Button *@
        <li class="page-item @(!Model.HasPreviousPage ? "disabled" : "")">
            <a class="page-link"
               href="@(Model.HasPreviousPage ? Url.Action(Model.ActionName, Model.ControllerName, new { page = Model.PageNumber - 1, sortBy = Model.SortBy, sortDirection = Model.SortDirection }) : "#")"
               aria-label="Previous">
                <span aria-hidden="true">&laquo; Previous</span>
            </a>
        </li>

        @* Page Numbers *@
        @{
            int startPage = Math.Max(1, Model.PageNumber - 2);
            int endPage = Math.Min(Model.TotalPages, Model.PageNumber + 2);

            // Show first page if not in range
            if (startPage > 1)
            {
                <li class="page-item">
                    <a class="page-link" href="@Url.Action(Model.ActionName, Model.ControllerName, new { page = 1, sortBy = Model.SortBy, sortDirection = Model.SortDirection })">1</a>
                </li>
                if (startPage > 2)
                {
                    <li class="page-item disabled">
                        <span class="page-link">...</span>
                    </li>
                }
            }

            // Page number links
            for (int i = startPage; i <= endPage; i++)
            {
                <li class="page-item @(i == Model.PageNumber ? "active" : "")">
                    <a class="page-link" href="@Url.Action(Model.ActionName, Model.ControllerName, new { page = i, sortBy = Model.SortBy, sortDirection = Model.SortDirection })">@i</a>
                </li>
            }

            // Show last page if not in range
            if (endPage < Model.TotalPages)
            {
                if (endPage < Model.TotalPages - 1)
                {
                    <li class="page-item disabled">
                        <span class="page-link">...</span>
                    </li>
                }
                <li class="page-item">
                    <a class="page-link" href="@Url.Action(Model.ActionName, Model.ControllerName, new { page = Model.TotalPages, sortBy = Model.SortBy, sortDirection = Model.SortDirection })">@Model.TotalPages</a>
                </li>
            }
        }

        @* Next Button *@
        <li class="page-item @(!Model.HasNextPage ? "disabled" : "")">
            <a class="page-link"
               href="@(Model.HasNextPage ? Url.Action(Model.ActionName, Model.ControllerName, new { page = Model.PageNumber + 1, sortBy = Model.SortBy, sortDirection = Model.SortDirection }) : "#")"
               aria-label="Next">
                <span aria-hidden="true">Next &raquo;</span>
            </a>
        </li>
    </ul>
</nav>
